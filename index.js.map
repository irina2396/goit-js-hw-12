{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50359122-c0461bb177b5f80fbb401fd3b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n    };\n\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"card\">\n    <a class=\"card__link\" href=\"${largeImageURL}\">\n      <img class=\"card__img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"card__info\">\n      <div class=\"card__info-item\">\n        <span class=\"label\">Likes</span>\n        <span class=\"value\">${likes}</span>\n      </div>\n      <div class=\"card__info-item\">\n        <span class=\"label\">Views</span>\n        <span class=\"value\">${views}</span>\n      </div>\n      <div class=\"card__info-item\">\n        <span class=\"label\">Comments</span>\n        <span class=\"value\">${comments}</span>\n      </div>\n      <div class=\"card__info-item\">\n        <span class=\"label\">Downloads</span>\n        <span class=\"value\">${downloads}</span>\n      </div>\n    </div>\n  </li>\n`).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.add('active');\n}\n\nexport function hideLoader() {\n    loader.classList.remove('active');\n}\nexport function showLoadMoreButton(){\n  loadMoreBtn.classList.remove('is-hidden');\n}\nexport function hideLoadMoreButton(){\n  loadMoreBtn.classList.add('is-hidden');\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    query = e.target.elements['search-text'].value.trim();\n    page = 1;\n\n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search term!',\n            position: 'topRight',\n        });\n    return;\n    }\n\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n    \n    if (data.hits.length === 0) {\n        iziToast.info({\n            title: 'No Results',\n            message: 'No images found for this query.',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    createGallery(data.hits);\n    if(totalHits > page * 15) {\n        showLoadMoreButton();\n    }\n} catch (error) {\n    iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n        position: 'topRight',\n    });\n    console.error(error);\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async ()=> {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n\n        if (page * 15 >= totalHits){\n            hideLoadMoreButton();\n            iziToast.info({\n                title: 'End of results',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n        scrollGallery();\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to load more images.',\n        });\n    } finally{\n        hideLoader();\n    }\n});\n\nfunction scrollGallery(){\n    const { height: cardHeight } = document\n        .querySelector('.card')\n        .getBoundingClientRect();\n    \n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","gallery","lightbox","SimpleLightbox","loader","loadMoreBtn","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","totalHits","e","iziToast","data","error","scrollGallery","cardHeight"],"mappings":"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"}